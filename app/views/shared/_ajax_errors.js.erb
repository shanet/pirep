{
  <%# Remove an existing errors element %>
  let oldErrors = document.querySelector("#<%= form_element_id %> .ajax-errors");
  if(oldErrors) oldErrors.remove();

  let errors = document.createElement('div');
  errors.classList.add('ajax-errors');
  errors.innerHTML = `<%= render 'shared/record_errors', record: record %>`;

  const target = document.getElementById("<%= form_element_id %>");

  <% if defined?(insert_before) %>
    target.parentNode.insertBefore(errors, target);
  <% else %>
    target.prepend(errors);
  <% end %>
}
